---
type Item = { title?: string; desc?: string; icon?: string };

const {
  titleZh,
  titleEn,
  subtitle,
  items = [],
} = Astro.props as {
  titleZh: string;
  titleEn?: string;
  subtitle?: string;
  items?: Item[];
};

const isSingle = items.length === 1;
---

<section
  class:list={[
    "count-agileits",
    "subpage-intro",
    isSingle ? "subpage-intro--single" : "",
    subtitle ? "subpage-intro--with-subtitle" : "",
  ]}
  aria-label={`${titleZh} 简介`}
>
  <div class="container">

    <!-- ===== 标题区 ===== -->
    <div class="subpage-intro-header">
      <h3 class="heading">
        <span>{titleZh}</span>
        {titleEn ? <small class="subpage-intro-en">{titleEn}</small> : null}
      </h3>

      {subtitle ? (
        <p class="subpage-intro-subtitle">{subtitle}</p>
      ) : null}
    </div>

    <!-- ===== 卡片区（有 items 才显示） ===== -->
    {items.length > 0 && (
      <div class="count-grids">
        <div class="count-bgcolor-w3ls">
          {items.map((it) => (
            <div class="col-md-3 count-grid">
              <div class="count hvr-bounce-to-bottom intro-card">
                {it.icon ? (
                  <div class="intro-icon">
                    <img src={it.icon} alt={it.title ?? "icon"} />
                  </div>
                ) : null}

                {it.title ? <h4 class="intro-title">{it.title}</h4> : null}
                {it.desc ? <p class="intro-desc">{it.desc}</p> : null}
              </div>
            </div>
          ))}
          <div class="clearfix"></div>
        </div>
      </div>
    )}
  </div>
</section>

<style>
/* ===== 基础白字 ===== */
.subpage-intro { color:#fff; }

.subpage-intro .heading span,
.subpage-intro .heading small {
  color:#fff !important;
}

.subpage-intro-en{
  display:block;
  font-size:12px;
  opacity:.75;
  margin-top:8px;
  letter-spacing:2px;
}

/* ===== 标题 + 简介：严格居中 ===== */
.subpage-intro-header{
  text-align:center;
  max-width: 960px;
  margin: 0 auto 28px;
}

.subpage-intro-subtitle{
  margin-top:16px;
  font-size:14px;
  line-height:1.6;
  color:rgba(255,255,255,.9);
  white-space:nowrap;        /* 桌面端强制一行 */
}

/* ===== 卡片区域布局（原逻辑保留） ===== */
.count-bgcolor-w3ls{
  display:flex !important;
  justify-content:center !important;
  flex-wrap:wrap;
  gap:32px;
}

.count-grid{
  float:none !important;
  width:22%;
  min-width:220px;
}

.count-grid:only-child{ width:46%; }

.count-grid:nth-last-child(2):first-child,
.count-grid:nth-last-child(2):first-child ~ .count-grid{
  width:36%;
}

.count-grid:nth-last-child(3):first-child,
.count-grid:nth-last-child(3):first-child ~ .count-grid{
  width:28%;
}

/* ===== 卡片内容 ===== */
.intro-card{
  padding:18px 16px;
  display:flex;
  flex-direction:column;
  justify-content:center;
}

.intro-title{
  margin:0 0 8px;
  font-size:18px;
  font-weight:700;
}

.intro-desc{
  margin:0;
  font-size:14px;
  opacity:.9;
}

/* ===== 移动端 ===== */
@media (max-width: 768px){
  .subpage-intro-subtitle{
    white-space:normal;   /* 手机允许换行 */
    font-size:13px;
  }

  .count-grid{
    width:100% !important;
  }
}
</style>